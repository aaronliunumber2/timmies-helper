(this["webpackJsonptimmies-helper"]=this["webpackJsonptimmies-helper"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"teams":[{"fullName":"Toronto Maple Leafs","abbreviation":"TOR"},{"fullName":"Carolina Hurricanes","abbreviation":"CAR"},{"fullName":"Tampa Bay Lightning","abbreviation":"TBL","timmiesAbbreviation":"TB"},{"fullName":"Florida Panthers","abbreviation":"FLA"},{"fullName":"Winnipeg Jets","abbreviation":"WPG"},{"fullName":"New York Islanders","abbreviation":"NYI"},{"fullName":"Washington Capitals","abbreviation":"WSH"},{"fullName":"Vegas Golden Knights","abbreviation":"VGK"},{"fullName":"Chicago Blackhawks","abbreviation":"CHI"},{"fullName":"Edmonton Oilers","abbreviation":"EDM"},{"fullName":"St. Louis Blues","abbreviation":"STL"},{"fullName":"Boston Bruins","abbreviation":"BOS"},{"fullName":"Philadelphia Flyers","abbreviation":"PHI"},{"fullName":"Montreal Canadiens","abbreviation":"MTL"},{"fullName":"Pittsburgh Penguins","abbreviation":"PIT"},{"fullName":"Minnesota Wild","abbreviation":"MIN"},{"fullName":"Colorado Avalanche","abbreviation":"COL"},{"fullName":"Columbus Blue Jackets","abbreviation":"CBJ"},{"fullName":"Calgary Flames","abbreviation":"CGY"},{"fullName":"Arizona Coyotes","abbreviation":"ARI"},{"fullName":"Vancouver Canucks","abbreviation":"VAN"},{"fullName":"Los Angeles Kings","abbreviation":"LAK","timmiesAbbreviation":"LA"},{"fullName":"New York Rangers","abbreviation":"NYR"},{"fullName":"Nashville Predators","abbreviation":"NSH"},{"fullName":"San Jose Sharks","abbreviation":"SJS","timmiesAbbreviation":"SJ"},{"fullName":"Ottawa Senators","abbreviation":"OTT"},{"fullName":"Detroit Red Wings","abbreviation":"DET"},{"fullName":"Anaheim Ducks","abbreviation":"ANA"},{"fullName":"New Jersey Devils","abbreviation":"NJD","timmiesAbbreviation":"NJ"},{"fullName":"Dallas Stars","abbreviation":"DAL"},{"fullName":"Buffalo Sabres","abbreviation":"BUF"}]}')},27:function(e){e.exports=JSON.parse('{"players":[{"timmiesName":"Nicholas Suzuki","firstName":"Nick","lastName":"Suzuki"},{"timmiesName":"Tim Stutzle","firstName":"Tim","lastName":"St\xfctzle"},{"timmiesName":"T.J. Brodie","firstName":"TJ","lastName":"Brodie"},{"timmiesName":"Nicholas Paul","firstName":"Nick","lastName":"Paul"},{"timmiesName":"Mathew Dumba","firstName":"Matt","lastName":"Dumba"},{"timmiesName":"Alexis Lafreniere","firstName":"Alexis","lastName":"Lafreni\xe8re"},{"timmiesName":"Alexander Wennberg","firstName":"Alex","lastName":"Wennberg"},{"timmiesName":"Zachary Aston-Reese","firstName":"Zach","lastName":"Aston-Reese"}]}')},32:function(e,t,a){},33:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var s=a(1),i=a.n(s),n=a(26),r=a.n(n),o=(a(32),a(33),a(10)),l=a(5),c=a(6),m=a(2),b=a(8),d=a(7),h=a(11),p=a(3),u=a(0),f=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={gamesplayed:0,goals:0},s.getGoalsPerGame=s.getGoalsPerGame.bind(Object(m.a)(s)),s.getShotsPerGame=s.getShotsPerGame.bind(Object(m.a)(s)),s.getPPTimeOnIce=s.getPPTimeOnIce.bind(Object(m.a)(s)),s.getAverageTimeOnIce=s.getAverageTimeOnIce.bind(Object(m.a)(s)),s.getGamesPlayed=s.getGamesPlayed.bind(Object(m.a)(s)),s.getGoals=s.getGoals.bind(Object(m.a)(s)),s.getOpponentGAA=s.getOpponentGAA.bind(Object(m.a)(s)),s}return Object(c.a)(a,[{key:"getGamesPlayed",value:function(){return this.props.player.nhldata?this.props.player.nhldata.gamesPlayed:0}},{key:"getGoals",value:function(){return this.props.player.nhldata?this.props.player.nhldata.goals:0}},{key:"getGoalsPerGame",value:function(){return this.props.player.nhldata&&0!==this.props.player.nhldata.gamesPlayed?(this.props.player.nhldata.goals/this.props.player.nhldata.gamesPlayed).toFixed(2):0}},{key:"getShotsPerGame",value:function(){return this.props.player.nhldata&&0!==this.props.player.nhldata.gamesPlayed?(this.props.player.nhldata.shots/this.props.player.nhldata.gamesPlayed).toFixed(2):0}},{key:"getOpponentGAA",value:function(){return this.props.player.opponent?this.props.player.opponent.goalsAgainstPerGame.toFixed(2):"N/A"}},{key:"getPPTimeOnIce",value:function(){return this.props.player.statsdata?this.props.player.statsdata.powerPlayTimeOnIcePerGame:0}},{key:"getAverageTimeOnIce",value:function(){return this.props.player.nhldata?this.props.player.statsdata.timeOnIcePerGame:0}},{key:"render",value:function(){return Object(u.jsxs)(h.a,{children:[Object(u.jsxs)(p.a,{className:"player-name",xs:"2",children:[this.props.player.firstName.substring(0,1),". ",this.props.player.lastName]}),Object(u.jsx)(p.a,{xs:"1",children:this.props.player.position}),Object(u.jsxs)(p.a,{xs:"1",children:[" ",this.getGamesPlayed()]}),Object(u.jsx)(p.a,{xs:"1",children:this.getGoals()}),Object(u.jsx)(p.a,{xs:"1",children:this.getShotsPerGame()}),Object(u.jsx)(p.a,{xs:"1",children:this.getPPTimeOnIce()}),Object(u.jsx)(p.a,{xs:"1",children:this.getAverageTimeOnIce()}),Object(u.jsx)(p.a,{xs:"1",children:this.getGoalsPerGame()}),Object(u.jsx)(p.a,{xs:"1",children:this.getOpponentGAA()})]})}}]),a}(s.Component),g=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={sort:"goalsPerGame",ascending:!1},s.sort=s.sort.bind(Object(m.a)(s)),s.setSort=s.setSort.bind(Object(m.a)(s)),s.compareString=s.compareString.bind(Object(m.a)(s)),s.getShotsPerGame=s.getShotsPerGame.bind(Object(m.a)(s)),s}return Object(c.a)(a,[{key:"sort",value:function(e,t){var a=1;return this.state.ascending&&(a=-1),"name"===this.state.sort?this.compareString(e.firstName,t.firstName)*a:"position"===this.state.sort?this.compareString(e.position,t.position)*a:"games"===this.state.sort?(e.nhldata?e.nhldata.gamesPlayed:0)-(t.nhldata?t.nhldata.gamesPlayed:0)*a:"goals"===this.state.sort?(e.nhldata?e.nhldata.goals:0)-(t.nhldata?t.nhldata.goals:0)*a:"shotsPerGame"===this.state.sort?this.getShotsPerGame(e)-this.getShotsPerGame(t)*a:"ppTimeOnIce"===this.state.sort?this.compareString(e.statsdata?e.statsdata.powerPlayTimeOnIcePerGame:0,t.statsdata?t.statsdata.powerPlayTimeOnIcePerGame:0)*a:"timeOnIce"===this.state.sort?this.compareString(e.statsdata?e.statsdata.timeOnIcePerGame:0,t.statsdata?t.statsdata.timeOnIcePerGame:0)*a:"opponentGAA"===this.state.sort?(e.opponent?e.opponent.goalsAgainstPerGame:0)-(t.opponent?t.opponent.goalsAgainstPerGame:0)*a:(e.nhldata?e.nhldata.goals/e.nhldata.gamesPlayed:0)-(t.nhldata?t.nhldata.goals/t.nhldata.gamesPlayed:0)*a}},{key:"setSort",value:function(e,t){e.preventDefault(),t===this.state.sort?this.setState({ascending:!this.state.ascending}):this.setState({sort:t,ascending:!1})}},{key:"compareString",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"getShotsPerGame",value:function(e){return e.nhldata&&0!==e.nhldata.gamesPlayed?(e.nhldata.shots/e.nhldata.gamesPlayed).toFixed(2):0}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{children:[Object(u.jsxs)(h.a,{children:[Object(u.jsx)(p.a,{xs:"2",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"name")},children:"Name"})}),Object(u.jsx)(p.a,{xs:"1",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"position")},children:"Pos"})}),Object(u.jsx)(p.a,{xs:"1",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"games")},children:"Games"})}),Object(u.jsx)(p.a,{xs:"1",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"goals")},children:"Goals"})}),Object(u.jsx)(p.a,{xs:"1",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"shotsPerGame")},children:"Shots/GP"})}),Object(u.jsx)(p.a,{xs:"1",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"ppTimeOnIce")},children:"PP.TOI/GP"})}),Object(u.jsx)(p.a,{xs:"1",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"timeOnIce")},children:"TOI/GP"})}),Object(u.jsx)(p.a,{xs:"1",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"goalsPerGame")},children:"Goals/GP"})}),Object(u.jsx)(p.a,{xs:"1",children:Object(u.jsx)("a",{href:"#",onClick:function(t){return e.setSort(t,"opponentGAA")},children:"Opp.GAA"})})]}),this.props.players.sort((function(t,a){return e.sort(t,a)})).reverse().map((function(e,t){return Object(u.jsx)(f,{player:e},e.key)}))]})}}]),a}(s.Component),j=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={showList:[]},s.clickHeader=s.clickHeader.bind(Object(m.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){for(var e=[],t=0;t<this.props.playerLists.length;t++)e=[].concat(Object(o.a)(e),[!0]);this.setState({showList:e})}},{key:"clickHeader",value:function(e){var t=Object(o.a)(this.state.showList),a=t[e-1];t[e-1]=!a,this.setState({showList:t})}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{children:this.props.playerLists.map((function(t){return Object(u.jsxs)("div",{className:"player-list",children:[Object(u.jsx)("h2",{className:"list-header",children:Object(u.jsxs)("a",{href:"#",onClick:function(a){return e.clickHeader(t.id)},children:["List ",t.id]})}),Object(u.jsx)("div",{className:"stats-list",children:e.state.showList[t.id-1]&&Object(u.jsx)(g,{players:t.players,games:e.props.games,teams:e.props.teams})})]},t.id)}))})}}]),a}(s.Component),v=a(16),O=a(27),y=a(12),N=a.n(y),x=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={loading:!0,playerLists:[{id:"1",players:[]},{id:"2",players:[]},{id:"3",players:[]}],games:null,teams:[],errorMessage:"",currentSeason:"20202021",seasonType:"regular"},s.loadTimmies=s.loadTimmies.bind(Object(m.a)(s)),s.loadSetData=s.loadSetData.bind(Object(m.a)(s)),s.loadTeamData=s.loadTeamData.bind(Object(m.a)(s)),s.getPlayerOpponent=s.getPlayerOpponent.bind(Object(m.a)(s)),s.getTeamAbbreviation=s.getTeamAbbreviation.bind(Object(m.a)(s)),s.getTimmiesAbbreviation=s.getTimmiesAbbreviation.bind(Object(m.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadTeamData()}},{key:"loadTimmies",value:function(){var e=this;N.a.post("https://cors.bridged.cc/http://ec2-54-158-170-220.compute-1.amazonaws.com/api/v1/players").then((function(t){e.setState({loading:!1,games:t.data.games},e.loadSetData(t.data.sets))})).catch((function(t){e.setState({errorMessage:"Sorry!  Unable to load Tims Hockey Challenge Data.  Please try again later."})}))}},{key:"loadTeamData",value:function(){var e=this;N.a.create({baseURL:"https://cors.bridged.cc/https://api.nhle.com/stats/rest/en/team/summary?isAggregate=false&isGame=false&sort=%5B%7B%22property%22:%22points%22,%22direction%22:%22DESC%22%7D,%7B%22property%22:%22wins%22,%22direction%22:%22DESC%22%7D%5D&start=0&limit=50&factCayenneExp=gamesPlayed%3E=1&cayenneExp=gameTypeId=2%20and%20seasonId%3C=20202021%20and%20seasonId%3E=20202021",withCredentials:!1,headers:{}}).get().then((function(t){for(var a=t.data.data,s=0;s<a.length;s++){var i=a[s].teamFullName,n=e.getTeamAbbreviation(i),r=e.getTimmiesAbbreviation(i);a[s].teamAbbr=n,a[s].timmiesAbbr=r||n}e.setState({teams:a},e.loadTimmies())})).catch((function(e){console.log("Unable to get team stats from NHL website. Error: "+e)}))}},{key:"getTeamAbbreviation",value:function(e){var t=v.teams.find((function(t){return t.fullName===e}));return t?t.abbreviation:"MTL"}},{key:"getTimmiesAbbreviation",value:function(e){var t=v.teams.find((function(t){return t.fullName===e}));if(t)return t.timmiesAbbreviation?t.timmiesAbbreviation:""}},{key:"getPlayerOpponent",value:function(e){var t=null;if(e){var a=e.teamAbbrevs,s=this.state.teams.find((function(e){return e.teamAbbr===a}));if(s){var i=this.state.games.find((function(e){return e.teams.home.abbr===s.timmiesAbbr||e.teams.away.abbr===s.timmiesAbbr}));i&&(t=i.teams.home.abbr===a?this.state.teams.find((function(e){return e.timmiesAbbr===i.teams.away.abbr})):this.state.teams.find((function(e){return e.timmiesAbbr===i.teams.home.abbr})))}}return t||(console.log("Failed to get opponent for "+e.skaterFullName),console.log("Team Abbr: "+e.teamAbbrevs)),t}},{key:"loadSetData",value:function(e){var t=this;e.map((function(e){e.players.map((function(a){var s=a.firstName.trim(),i=a.lastName.trim(),n=s+" "+i,r=O.players.find((function(e){return e.timmiesName===n}));r&&(s=r.firstName,i=r.lastName,console.log("Found timmies player "+n+". Renamed to "+s+" "+i));var l="https://cors.bridged.cc/https://api.nhle.com/stats/rest/en/skater/summary?cayenneExp=gameTypeId=2%20and%20seasonId%3E=20202021%20and%20skaterFullName%20likeIgnoreCase%20%22%25"+s+"%20"+i+"%25%22";N.a.create({baseURL:l,withCredentials:!1,headers:{}}).get().then((function(s){var i=s.data.data[0],n=a.firstName+a.lastName;if(i)n=i.playerId;else{var r={firstName:a.firstName,lastName:a.lastName,position:a.position,key:n},l=Object(o.a)(t.state.playerLists),c=l[e.id-1];c.players=[].concat(Object(o.a)(c.players),[r]),t.setState({playerLists:l})}var m="https://cors.bridged.cc/";m+="https://statsapi.web.nhl.com/api/v1/people/",m+=n,m+="?expand=person.stats&stats=","regular"===t.state.seasonType?m+="statsSingleSeason":m+="statsSingleSeasonPlayoffs",m=m+"&season="+t.state.currentSeason,N.a.create({baseURL:m,withCredentials:!1,headers:{}}).get().then((function(s){var r=s.data.people[0];if(i.teamAbbrevs.includes(",")){var l=r.currentTeam.name,c=v.teams.find((function(e){return e.fullName===l}));i.teamAbbrevs=c.abbreviation}var m=r.stats[0].splits[0].stat,b=null;i&&(b=t.getPlayerOpponent(i));var d={firstName:a.firstName,lastName:a.lastName,position:a.position,key:n,nhldata:i,statsdata:m,opponent:b},h=Object(o.a)(t.state.playerLists),p=h[e.id-1];p.players=[].concat(Object(o.a)(p.players),[d]),t.setState({playerLists:h})})).catch((function(e){console.log("Player stats failed for  "+a.firstName+" "+a.lastName+". Error: "+e)}))})).catch((function(e){console.log("Player search didn't work for "+a.firstName+" "+a.lastName+". Error: "+e)}))}))}))}},{key:"render",value:function(){return this.state.errorMessage?Object(u.jsx)("div",{className:"error-message",children:this.state.errorMessage}):this.state.loading?Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:"https://miro.medium.com/max/882/1*9EBHIOzhE1XfMYoKz1JcsQ.gif",alt:"loading..."})}):Object(u.jsx)("div",{children:Object(u.jsx)(j,{playerLists:this.state.playerLists,games:this.state.games,teams:this.state.teams})})}}]),a}(s.Component);a(53);var P=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css",integrity:"sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l",crossOrigin:"anonymous"}),Object(u.jsx)("header",{className:"app-header",children:"Tim Horton's Hockey Challenge Helper"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(x,{}),Object(u.jsxs)("footer",{className:"footer",children:["Questions? Suggestions? Find me on ",Object(u.jsx)("a",{href:"//www.twitter.com/Zorbane",target:"_blank",children:"Twitter"})]})]})]})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,56)).then((function(t){var a=t.getCLS,s=t.getFID,i=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),s(e),i(e),n(e),r(e)}))};r.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(P,{})}),document.getElementById("root")),S()}},[[54,1,2]]]);
//# sourceMappingURL=main.e0895a59.chunk.js.map